var AuthorDropTargetElement=function(){"use strict";function a(e,t){for(var o=0;o<t.length;o++){var r=t[o];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var e;window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-drop-target> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),0<(e=Array.from(new Set([])).filter(function(e){return!customElements.get(e)})).length&&(console.error("[ERROR] <author-drop-target> Required dependenc".concat(1!==e.length?"ies":"y"," not found: ").concat(e.map(function(e){return"<".concat(e,">")}).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1]))),e.forEach(function(e,t){return console.info("".concat(t+1,". <").concat(e,"> is available at ").concat("https://github.com/author-elements/drop-target".replace("drop-target",e.replace("author-",""))))}));var t=function(e){function o(){var d,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e=this,t=i(o).call(this,'<template><style>@charset "UTF-8"; :host *,:host :after,:host :before{box-sizing:border-box}author-drop-target *,author-drop-target :after,author-drop-target :before{box-sizing:border-box}</style><slot></slot></template>'),(d=!t||"object"!=typeof t&&"function"!=typeof t?c(e):t).UTIL.defineAttributes({accepts:{default:"*"},mustMatch:{default:1},over:{default:!1},sortable:{default:!1},types:{default:null}}),d.UTIL.defineProperties({acceptedTypes:{private:!0,readonly:!0,get:function(){return null===d.accepts?null:d.accepts.replace(/\s+/g," ").trim().split(" ")}},dimensions:{private:!0,readonly:!0,get:function(){return d.getBoundingClientRect()}},draggable:{private:!0,default:null},lastPointerClientPosition:{private:!0,default:null},offsetPointerPosition:{private:!0,default:null},willAcceptDrop:{private:!0,default:!1}}),d.UTIL.definePrivateMethods({applyDragHandlers:function(){var e=d.PRIVATE.draggable;e.on("drag",d.PRIVATE.dragHandler),e.on("drag.end",d.PRIVATE.dragendHandler)},getEventData:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return{cancelable:!0,composed:!0,detail:Object.assign({},{acceptedTypes:d.PRIVATE.acceptedTypes,data:d.PRIVATE.draggable.data,willAcceptDrop:d.PRIVATE.willAcceptDrop,position:d.PRIVATE.getPointerPosition(e),source:d.PRIVATE.draggable},t)}},getPointerPosition:function(e){var t={height:d.offsetHeight,width:d.offsetWidth},o=e.offsetX||d.PRIVATE.offsetPointerPosition.x,r=e.offsetY||d.PRIVATE.offsetPointerPosition.y,n=t.width-o,a=t.height-r,i={x:o,y:r,top:{px:r,pct:d.UTIL.getPercentageDecimal(r,t.height)},right:{px:n,pct:d.UTIL.getPercentageDecimal(n,t.width)},bottom:{px:a,pct:d.UTIL.getPercentageDecimal(a,t.height)},left:{px:o,pct:d.UTIL.getPercentageDecimal(o,t.width)}};return Object.assign({},i,{quadrant:d.PRIVATE.getDropQuadrant(i)})},dragHandler:function(e){var t=d.PRIVATE,o=t.draggable,r=t.dimensions,n=t.lastPointerClientPosition,a=e.detail.position.client,i=null,l=null,c={x:a.x>=r.left&&a.x<=r.right,y:a.y>=r.top&&a.y<=r.bottom};null!==n&&(i={top:c.x&&n.y<=r.top&&a.y>r.top,right:c.y&&n.x>=r.right&&a.x<r.right,bottom:c.x&&n.y>=r.bottom&&a.y<r.bottom,left:c.y&&n.x<=r.left&&a.x>r.left},l={top:c.x&&n.y>=r.top&&a.y<r.top,right:c.y&&n.x<=r.right&&a.x>r.right,bottom:c.x&&n.y<=r.bottom&&a.y>r.bottom,left:c.y&&n.x>=r.left&&a.x<r.left}),d.PRIVATE.offsetPointerPosition={x:a.x-r.left,y:a.y-r.top};var s=d.contains(o);if(null!==i&&Object.values(i).some(Boolean)){var u=new CustomEvent("drag.enter",d.PRIVATE.getEventData(e));d.emit(u),s?(d.over=!1,d.PRIVATE.willAcceptDrop=!1):u.defaultPrevented||(d.emit("drop.allow"),d.over=!0,d.PRIVATE.willAcceptDrop=!0)}c.x&&c.y&&(d.over||(d.over=!s,d.emit("drop.".concat(s?"deny":"allow"),{})),d.emit(new CustomEvent("drag.over",d.PRIVATE.getEventData(e)))),null!==l&&Object.values(l).some(Boolean)&&(d.over=!1,d.emit("drop.deny",{}),d.emit(new CustomEvent("drag.leave",d.PRIVATE.getEventData(e)))),d.PRIVATE.lastPointerClientPosition={x:a.x,y:a.y}},getDropQuadrant:function(e){var t="left",o="top";return.5===e.left.pct&&(t="center"),.5<e.left.pct&&(t="right"),.5===e.top.pct&&(o="center"),.5<e.top.pct&&(o="bottom"),"".concat(o," ").concat(t)},dragendHandler:function(e){var t=new CustomEvent("drop",d.PRIVATE.getEventData(e));d.over&&d.emit(t),t.defaultPrevented&&console.log("PREVENTED"),d.PRIVATE.removeDragHandlers(),d.over=!1,d.offsetPointerPosition=null},removeDragHandlers:function(){d.PRIVATE.draggable.off("drag",d.PRIVATE.dragHandler),d.PRIVATE.draggable.off("drag.end",d.PRIVATE.dragendHandler)}}),d.UTIL.registerListeners(c(d),{"handshake.offered":function(e){var t=e.detail,o=t.draggable,r=t.types,n=!1;switch(d.mustMatch){case"all":case"*":d.PRIVATE.acceptedTypes.every(function(e){return r.includes(e)})||(n=!0);break;default:d.PRIVATE.acceptedTypes.filter(function(e){return r.includes(e)}).length>=d.mustMatch||(n=!0)}n||(d.emit("handshake.accepted",{dropTarget:c(d)},o),d.PRIVATE.draggable=o,d.PRIVATE.applyDragHandlers())}}),d}var t,r,n;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(o,AuthorBaseElement(HTMLElement)),t=o,n=[{key:"observedAttributes",get:function(){return["accepts","sortable"]}}],(r=null)&&a(t.prototype,r),n&&a(t,n),o}();return customElements.define("author-drop-target",t),t}();
//# sourceMappingURL=author-drop-target.es5.min.js.map
