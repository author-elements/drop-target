{"version":3,"file":"author-draggable.es5.min.js","sources":["../src/element.js"],"sourcesContent":["class AuthorDraggableElement extends AuthorBaseElement(HTMLElement) {\n  constructor () {\n    super(`{{TEMPLATE-STRING}}`)\n\n    this.UTIL.defineAttributes({\n      direction: {\n        default: null\n      },\n\n      disabled: {\n        default: false\n      },\n\n      free: {\n        default: false\n      },\n\n      'max-drag-distance': {\n        default: null\n      },\n\n      'min-drag-distance': {\n        default: null\n      },\n\n      type: {\n        default: null\n      },\n    })\n\n    this.UTIL.defineProperties({\n      acceptedConstraintKeys: {\n        private: true,\n        readonly: true,\n        default: [\n          'x',\n          'y',\n          'up',\n          'right',\n          'down',\n          'left'\n        ]\n      },\n\n      canDrop: {\n        private: true,\n        default: false\n      },\n\n      clone: {\n        private: true,\n        default: null\n      },\n\n      constraints: {\n        private: true,\n        readonly: true,\n        get: () => {\n          if (!this.direction) {\n            return null\n          }\n\n          return this.direction.replace(/\\s+/g,' ').trim().split(' ')\n        }\n      },\n\n      data: {\n        default: null\n      },\n\n      dimensions: {\n        private: true,\n        readonly: true,\n        get: () => this.getBoundingClientRect()\n      },\n\n      dragArea: {\n        private: true,\n        readonly: true,\n        get: () => {\n          let dragAreas = document.querySelectorAll('author-dragarea')\n\n          for (let dragArea of dragAreas) {\n            if (dragArea.contains(this)) {\n              return dragArea\n            }\n          }\n\n          return document.body\n        }\n      },\n\n      dragIsActive: {\n        private: true,\n        default: false\n      },\n\n      dropTargets: {\n        private: true,\n        default: null\n      },\n\n      initialPosition: {\n        private: true,\n        default: null\n      },\n\n      initialTimestamp: {\n        private: true,\n        default: null\n      },\n\n      pointerEventsSupported: {\n        private: true,\n        readonly: true,\n        default: window.PointerEvent === undefined ? false : true\n      },\n\n      pointerOffset: {\n        private: true,\n        default: null\n      },\n\n      userIsTouching: {\n        private: true,\n        default: false\n      },\n\n      types: {\n        private: true,\n        readonly: true,\n        get: () => {\n          if (!this.type) {\n            return null\n          }\n\n          return this.type.replace(/\\s+/g,' ').trim().split(' ')\n        }\n      }\n    })\n\n    this.UTIL.definePrivateMethods({\n      forwardEvent: (evt, newEvtName, detail = {}, target = this) => {\n        evt.preventDefault()\n\n        detail.originalEvent = evt\n\n        if (!this.PRIVATE.pointerEventsSupported) {\n          this.emit(newEvtName, detail, target)\n        }\n      },\n\n      // Polyfill for Firefox bug from 2002 :|\n      // window.getComputedStyle(el).cssText returns \"\"\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=137687\n      getComputedStylesCssText: element => {\n        let computed = window.getComputedStyle(element)\n        let acc = []\n\n        if (computed.cssText !== '') {\n          return computed.cssText\n        }\n\n        for (let property in computed) {\n          if (typeof computed[property] === 'string') {\n            acc.push(`${property}: ${computed[property]}`)\n          }\n        }\n\n        return acc.join('; ')\n      },\n\n      handshakeAcceptedHandler: evt => {\n        let { dropTarget } = evt.detail\n\n        this.PRIVATE.dropTargets.push(dropTarget)\n        dropTarget.on('drop.allow', evt => this.PRIVATE.canDrop = true)\n        dropTarget.on('drop.deny', evt => this.PRIVATE.canDrop = false)\n      },\n\n      initializeClone: () => {\n        this.setAttribute('dragging', '')\n\n        this.PRIVATE.clone = this.cloneNode(true)\n        this.PRIVATE.synchronizeStyles()\n        this.PRIVATE.clone.sourceElement = this\n\n        this.removeAttribute('dragging')\n        this.PRIVATE.clone.setAttribute('clone', '')\n\n        document.body.appendChild(this.PRIVATE.clone)\n      },\n\n      pointerupHandler: evt => {\n        let dragendEvent = new CustomEvent('drag.end', this.PRIVATE.getEventData(evt, {\n          drag: {\n            distance: this.PRIVATE.getDragDistance(evt),\n            duration: evt.timeStamp - this.PRIVATE.initialTimestamp\n          },\n          position: this.PRIVATE.getPointerPosition(evt, false)\n        }))\n\n        this.emit(dragendEvent)\n        this.PRIVATE.reset()\n      },\n\n      mouseupHandler: evt => {\n        this.PRIVATE.forwardEvent(evt, 'pointerup', {}, document.body)\n      },\n\n      touchendHandler: evt => {\n        // document.removeEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n      },\n\n      applyBodyListeners: () => {\n        document.body.addEventListener('pointerup', this.PRIVATE.pointerupHandler)\n        document.body.addEventListener('mouseup', this.PRIVATE.mouseupHandler)\n        document.body.addEventListener('touchend', this.PRIVATE.touchendHandler)\n      },\n\n      removeBodyListeners: () => {\n        document.body.removeEventListener('pointerup', this.PRIVATE.pointerupHandler)\n        document.body.removeEventListener('mouseup', this.PRIVATE.mouseupHandler)\n        document.body.removeEventListener('touchend', this.PRIVATE.touchendHandler)\n        document.body.removeEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n      },\n\n      initiateDrag: () => {\n        this.PRIVATE.applyBodyListeners()\n\n        this.setAttribute(this.free ? 'dragging' : 'ghost', '')\n        this.PRIVATE.dragIsActive = true\n        // this.emit(new CustomEvent('after.drag.start', this.PRIVATE.getEventData(evt, {\n        //\n        // })))\n      },\n\n      getRelativePointerPosition: (relWidth, relHeight, left, top) => {\n        let right = relWidth - left\n        let bottom = relHeight - top\n\n        return {\n          x: left,\n          y: top,\n\n          top: {\n            px: top,\n            pct: this.UTIL.getPercentageDecimal(top, relHeight)\n          },\n\n          right: {\n            px: right,\n            pct: this.UTIL.getPercentageDecimal(right, relWidth)\n          },\n\n          bottom: {\n            px: bottom,\n            pct: this.UTIL.getPercentageDecimal(bottom, relHeight)\n          },\n\n          left: {\n            px: left,\n            pct: this.UTIL.getPercentageDecimal(left, relWidth)\n          }\n        }\n      },\n\n      getPercentageDecimal: (portion, whole, decimalPlaces = null) => {\n        let decimal = portion / whole\n\n        if (decimal < 0) {\n          return 0\n        }\n\n        if (decimalPlaces !== null) {\n          return decimal.toFixed(decimalPlaces)\n        }\n\n        return decimal\n      },\n\n      getPointerPosition: (evt, offset = true, client = true, doc = true,) => {\n        let obj = {}\n\n        if (offset) {\n          obj.offset = this.PRIVATE.getRelativePointerPosition(this.offsetWidth, this.offsetHeight, evt.offsetX, evt.offsetY)\n        }\n\n        if (client) {\n          obj.client = this.PRIVATE.getRelativePointerPosition(document.documentElement.clientWidth, document.documentElement.clientHeight, evt.clientX, evt.clientY)\n        }\n\n        if (doc) {\n          obj.document = this.PRIVATE.getRelativePointerPosition(document.documentElement.scrollWidth, document.documentElement.scrollHeight, evt.pageX, evt.pageY)\n        }\n\n        return obj\n      },\n\n      getEventData: (evt, props = {}) => {\n        let config = {\n          cancelable: true,\n          composed: true,\n\n          detail: Object.assign({}, {\n            altKey: evt.altKey,\n            ctrlKey: evt.ctrlKey,\n            metaKey: evt.metaKey,\n            shiftKey: evt.shiftKey,\n            types: this.PRIVATE.types\n          }, props)\n        }\n\n        Object.defineProperty(config.detail, 'data', {\n          set: value => this.data = value,\n          get: () => this.data\n        })\n\n        return config\n      },\n\n      pointerMoveHandler: evt => {\n        if (!this.PRIVATE.dragIsActive) {\n          if (!this.free) {\n            this.PRIVATE.initializeClone()\n          }\n\n          let dragstartEvent = new CustomEvent('drag.start', this.PRIVATE.getEventData(evt, {\n            position: this.PRIVATE.getPointerPosition(evt)\n          }))\n\n          this.emit(dragstartEvent)\n\n          if (dragstartEvent.defaultPrevented) {\n            return\n          }\n\n          this.PRIVATE.initiateDrag()\n        }\n\n        let dragEvent = new CustomEvent('drag', this.PRIVATE.getEventData(evt, {\n          canDrop: this.PRIVATE.canDrop,\n          drag: {\n            distance: this.PRIVATE.getDragDistance(evt),\n            duration: evt.timeStamp - this.PRIVATE.initialTimestamp\n          },\n          position: this.PRIVATE.getPointerPosition(evt, false)\n        }))\n\n        this.emit(dragEvent)\n\n        if (dragEvent.defaultPrevented) {\n          return\n        }\n\n        this.PRIVATE.updatePosition(evt)\n      },\n\n      getDragDistance: evt => ({\n        x: Math.abs(this.PRIVATE.initialPosition.x - evt.pageX),\n        y: Math.abs(this.PRIVATE.initialPosition.y - evt.pageY)\n      }),\n\n      reset: () => {\n        if (this.free) {\n          this.removeAttribute('dragging')\n        } else {\n          this.removeAttribute('ghost')\n\n          if (this.PRIVATE.clone !== null) {\n            document.body.removeChild(this.PRIVATE.clone)\n            this.PRIVATE.clone = null\n          }\n        }\n\n        this.PRIVATE.dragIsActive = false\n        this.PRIVATE.pointerOffset = null\n        this.PRIVATE.removeBodyListeners()\n        this.PRIVATE.dropTargets = null\n        this.PRIVATE.initialPosition = null\n        this.PRIVATE.initialTimestamp = null\n      },\n\n      storeDropTargets: () => {\n        this.PRIVATE.dropTargets = []\n        let allDropTargets = document.querySelectorAll('author-droptarget')\n\n        this.on('handshake.accepted', this.PRIVATE.handshakeAcceptedHandler)\n\n        for (let dropTarget of allDropTargets) {\n          this.emit('handshake.offered', {\n            draggable: this,\n            types: this.PRIVATE.types\n          }, dropTarget)\n        }\n\n        this.off('handshake.accepted', this.PRIVATE.handshakeHandler)\n      },\n\n      synchronizeStyles: () => {\n        let { clone, getComputedStylesCssText } = this.PRIVATE\n\n        clone.style.cssText = getComputedStylesCssText(this)\n\n        let children = this.getElementsByTagName('*')\n        let cloneChildren = clone.getElementsByTagName('*')\n\n        if (children.length > 0) {\n          for (let i = 0; i < children.length; i++) {\n            cloneChildren[i].style.cssText = getComputedStylesCssText(children[i])\n          }\n        }\n      },\n\n      updatePosition: evt => {\n        let { clone, dimensions, originalCoordinates, pointerOffset } = this.PRIVATE\n        let newCoordinates = {\n          x: evt.clientX - pointerOffset.x,\n          y: evt.clientY - pointerOffset.y\n        }\n\n        if (this.free) {\n          newCoordinates = {\n            x: newCoordinates.x - (originalCoordinates.x - window.scrollX),\n            y: newCoordinates.y - (originalCoordinates.y - window.scrollY)\n          }\n\n          return this.UTIL.setStyleProperty('dragging', 'transform', `translate(${newCoordinates.x}px, ${newCoordinates.y}px)`)\n        }\n\n        clone.UTIL.setStyleProperties('dragging', [\n          {\n            name: 'left',\n            value: `${newCoordinates.x}px`,\n            important: true\n          },\n          {\n            name: 'top',\n            value: `${newCoordinates.y}px`,\n            important: true\n          }\n        ])\n      }\n    })\n\n    this.UTIL.registerListeners(this, {\n      'attribute.changed': evt => {\n        let { attribute, newValue, oldValue } = evt.detail\n\n        switch (attribute) {\n          case 'free':\n            if (!this.free) {\n              this.UTIL.removeStyleProperty('dragging', 'transform')\n            }\n            break\n        }\n      },\n\n      connected: () => {\n        this.UTIL.insertStyleRule('dragging', ':host {}')\n\n        this.emit('author-draggable.connected', {\n          draggable: this\n        }, window)\n      },\n\n      mousedown: evt => {\n        if (this.PRIVATE.userIsTouching) {\n          return evt.preventDefault()\n        }\n\n        this.PRIVATE.forwardEvent(evt, 'pointerdown')\n      },\n\n      touchstart: evt => {\n        evt.preventDefault()\n        this.PRIVATE.userIsTouching = true\n        this.PRIVATE.forwardEvent(evt, 'pointerdown')\n      },\n\n      pointerup: evt => {\n        this.PRIVATE.reset()\n      },\n\n      pointerdown: evt => {\n        let client = {}\n\n        this.PRIVATE.initialTimestamp = evt.timeStamp\n\n        if (evt instanceof CustomEvent) {\n          client.x = evt.detail.originalEvent.clientX\n          client.y = evt.detail.originalEvent.clientY\n        } else {\n          client.x = evt.clientX\n          client.y = evt.clientY\n        }\n\n        this.PRIVATE.initialPosition = {\n          x: client.x,\n          y: client.y\n        }\n\n        this.PRIVATE.pointerOffset = {\n          x: client.x - this.PRIVATE.dimensions.left,\n          y: client.y - this.PRIVATE.dimensions.top\n        }\n\n        document.body.addEventListener(this.PRIVATE.pointerEventsSupported ? 'pointermove' : 'mousemove', this.PRIVATE.pointerMoveHandler)\n        this.PRIVATE.storeDropTargets()\n      },\n\n      rendered: () => {\n        this.UTIL.defineProperty('originalCoordinates', {\n          private: true,\n          readonly: true,\n          default: {\n            x: this.PRIVATE.dimensions.left + window.scrollX,\n            y: this.PRIVATE.dimensions.top + window.scrollY\n          }\n        })\n      }\n    })\n  }\n\n  static get observedAttributes () {\n    return ['direction', 'disabled', 'free', 'min-drag-distance', 'max-drag-distance', 'type']\n  }\n}\n\ncustomElements.define('author-draggable', AuthorDraggableElement)\n\nexport default AuthorDraggableElement\n"],"names":["AuthorDraggableElement","UTIL","defineAttributes","direction","default","disabled","free","type","defineProperties","acceptedConstraintKeys","private","readonly","canDrop","clone","constraints","get","_this","replace","trim","split","data","dimensions","getBoundingClientRect","dragArea","dragAreas","document","querySelectorAll","contains","body","dragIsActive","dropTargets","initialPosition","initialTimestamp","pointerEventsSupported","undefined","window","PointerEvent","pointerOffset","userIsTouching","types","definePrivateMethods","forwardEvent","evt","newEvtName","detail","target","preventDefault","originalEvent","PRIVATE","emit","getComputedStylesCssText","element","computed","getComputedStyle","acc","cssText","property","push","join","handshakeAcceptedHandler","dropTarget","on","initializeClone","setAttribute","cloneNode","synchronizeStyles","sourceElement","removeAttribute","appendChild","pointerupHandler","dragendEvent","CustomEvent","getEventData","drag","distance","getDragDistance","duration","timeStamp","position","getPointerPosition","reset","mouseupHandler","touchendHandler","applyBodyListeners","addEventListener","removeBodyListeners","removeEventListener","pointerMoveHandler","initiateDrag","getRelativePointerPosition","relWidth","relHeight","left","top","right","bottom","x","y","px","pct","getPercentageDecimal","portion","whole","decimalPlaces","decimal","toFixed","offset","client","doc","obj","offsetWidth","offsetHeight","offsetX","offsetY","documentElement","clientWidth","clientHeight","clientX","clientY","scrollWidth","scrollHeight","pageX","pageY","props","config","cancelable","composed","Object","assign","altKey","ctrlKey","metaKey","shiftKey","defineProperty","set","value","dragstartEvent","defaultPrevented","dragEvent","updatePosition","Math","abs","removeChild","storeDropTargets","allDropTargets","draggable","off","handshakeHandler","style","children","getElementsByTagName","cloneChildren","length","i","originalCoordinates","newCoordinates","scrollX","scrollY","setStyleProperty","setStyleProperties","name","important","registerListeners","attribute","newValue","oldValue","removeStyleProperty","connected","insertStyleRule","mousedown","touchstart","pointerup","pointerdown","rendered","AuthorBaseElement","HTMLElement","customElements","define"],"mappings":"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"}