var AuthorDraggableElement=function(){"use strict";function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var e;window.hasOwnProperty("AuthorBaseElement")||(console.error('[ERROR] <author-draggable> Required dependency "AuthorBaseElement" not found.'),console.info("AuthorBaseElement is available at https://github.com/author-elements/base")),0<(e=Array.from(new Set([])).filter(function(e){return!customElements.get(e)})).length&&(console.error("[ERROR] <author-draggable> Required dependenc".concat(1!==e.length?"ies":"y"," not found: ").concat(e.map(function(e){return"<".concat(e,">")}).join(", ").replace(", "+e[e.length-1]," and "+e[e.length-1]))),e.forEach(function(e,t){return console.info("".concat(t+1,". <").concat(e,"> is available at ").concat("https://github.com/author-elements/draggable".replace("draggable",e.replace("author-",""))))}));var t=function(e){function n(){var l,e,t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=this,t=a(n).call(this,'<template><style>@charset "UTF-8"; :host{display:flex;cursor:move}:host *,:host :after,:host :before{box-sizing:border-box}:host([clone][dragging]){contain:content!important;position:fixed!important;z-index:2147483647!important;will-change:left,top}author-draggable{display:flex;cursor:move}author-draggable *,author-draggable :after,author-draggable :before{box-sizing:border-box}author-draggable[clone][dragging]{contain:content!important;position:fixed!important;z-index:2147483647!important;will-change:left,top}</style><slot></slot></template>'),(l=!t||"object"!=typeof t&&"function"!=typeof t?d(e):t).UTIL.defineAttributes({direction:{default:null},disabled:{default:!1},free:{default:!1},"max-drag-distance":{default:null},"min-drag-distance":{default:null},type:{default:null}}),l.UTIL.defineProperties({acceptedConstraintKeys:{private:!0,readonly:!0,default:["x","y","up","right","down","left"]},canDrop:{private:!0,default:!1},clone:{private:!0,default:null},constraints:{private:!0,readonly:!0,get:function(){return l.direction?l.direction.replace(/\s+/g," ").trim().split(" "):null}},data:{default:null},dimensions:{private:!0,readonly:!0,get:function(){return l.getBoundingClientRect()}},dragArea:{private:!0,readonly:!0,get:function(){var e=document.querySelectorAll("author-dragarea"),t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;if(a.contains(d(l)))return a}}catch(e){n=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}return document.body}},dragIsActive:{private:!0,default:!1},dropTargets:{private:!0,default:null},initialPosition:{private:!0,default:null},initialTimestamp:{private:!0,default:null},pointerEventsSupported:{private:!0,readonly:!0,default:void 0!==window.PointerEvent},pointerOffset:{private:!0,default:null},userIsTouching:{private:!0,default:!1},types:{private:!0,readonly:!0,get:function(){return l.type?l.type.replace(/\s+/g," ").trim().split(" "):null}}}),l.UTIL.definePrivateMethods({forwardEvent:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:d(l);e.preventDefault(),n.originalEvent=e,l.PRIVATE.pointerEventsSupported||l.emit(t,n,o)},getComputedStylesCssText:function(e){var t=window.getComputedStyle(e),n=[];if(""!==t.cssText)return t.cssText;for(var o in t)"string"==typeof t[o]&&n.push("".concat(o,": ").concat(t[o]));return n.join("; ")},handshakeAcceptedHandler:function(e){var t=e.detail.dropTarget;l.PRIVATE.dropTargets.push(t),t.on("drop.allow",function(e){return l.PRIVATE.canDrop=!0}),t.on("drop.deny",function(e){return l.PRIVATE.canDrop=!1})},initializeClone:function(){l.setAttribute("dragging",""),l.PRIVATE.clone=l.cloneNode(!0),l.PRIVATE.synchronizeStyles(),l.PRIVATE.clone.sourceElement=d(l),l.removeAttribute("dragging"),l.PRIVATE.clone.setAttribute("clone",""),document.body.appendChild(l.PRIVATE.clone)},pointerupHandler:function(e){var t=new CustomEvent("drag.end",l.PRIVATE.getEventData(e,{drag:{distance:l.PRIVATE.getDragDistance(e),duration:e.timeStamp-l.PRIVATE.initialTimestamp},position:l.PRIVATE.getPointerPosition(e,!1)}));l.emit(t),l.PRIVATE.reset()},mouseupHandler:function(e){l.PRIVATE.forwardEvent(e,"pointerup",{},document.body)},touchendHandler:function(e){},applyBodyListeners:function(){document.body.addEventListener("pointerup",l.PRIVATE.pointerupHandler),document.body.addEventListener("mouseup",l.PRIVATE.mouseupHandler),document.body.addEventListener("touchend",l.PRIVATE.touchendHandler)},removeBodyListeners:function(){document.body.removeEventListener("pointerup",l.PRIVATE.pointerupHandler),document.body.removeEventListener("mouseup",l.PRIVATE.mouseupHandler),document.body.removeEventListener("touchend",l.PRIVATE.touchendHandler),document.body.removeEventListener(l.PRIVATE.pointerEventsSupported?"pointermove":"mousemove",l.PRIVATE.pointerMoveHandler)},initiateDrag:function(){l.PRIVATE.applyBodyListeners(),l.setAttribute(l.free?"dragging":"ghost",""),l.PRIVATE.dragIsActive=!0},getRelativePointerPosition:function(e,t,n,o){var r=e-n,i=t-o;return{x:n,y:o,top:{px:o,pct:l.UTIL.getPercentageDecimal(o,t)},right:{px:r,pct:l.UTIL.getPercentageDecimal(r,e)},bottom:{px:i,pct:l.UTIL.getPercentageDecimal(i,t)},left:{px:n,pct:l.UTIL.getPercentageDecimal(n,e)}}},getPercentageDecimal:function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=e/t;return o<0?0:null!==n?o.toFixed(n):o},getPointerPosition:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3],r={};return t&&(r.offset=l.PRIVATE.getRelativePointerPosition(l.offsetWidth,l.offsetHeight,e.offsetX,e.offsetY)),n&&(r.client=l.PRIVATE.getRelativePointerPosition(document.documentElement.clientWidth,document.documentElement.clientHeight,e.clientX,e.clientY)),o&&(r.document=l.PRIVATE.getRelativePointerPosition(document.documentElement.scrollWidth,document.documentElement.scrollHeight,e.pageX,e.pageY)),r},getEventData:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n={cancelable:!0,composed:!0,detail:Object.assign({},{altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey,types:l.PRIVATE.types},t)};return Object.defineProperty(n.detail,"data",{set:function(e){return l.data=e},get:function(){return l.data}}),n},pointerMoveHandler:function(e){if(!l.PRIVATE.dragIsActive){l.free||l.PRIVATE.initializeClone();var t=new CustomEvent("drag.start",l.PRIVATE.getEventData(e,{position:l.PRIVATE.getPointerPosition(e)}));if(l.emit(t),t.defaultPrevented)return;l.PRIVATE.initiateDrag()}var n=new CustomEvent("drag",l.PRIVATE.getEventData(e,{canDrop:l.PRIVATE.canDrop,drag:{distance:l.PRIVATE.getDragDistance(e),duration:e.timeStamp-l.PRIVATE.initialTimestamp},position:l.PRIVATE.getPointerPosition(e,!1)}));l.emit(n),n.defaultPrevented||l.PRIVATE.updatePosition(e)},getDragDistance:function(e){return{x:Math.abs(l.PRIVATE.initialPosition.x-e.pageX),y:Math.abs(l.PRIVATE.initialPosition.y-e.pageY)}},reset:function(){l.free?l.removeAttribute("dragging"):(l.removeAttribute("ghost"),null!==l.PRIVATE.clone&&(document.body.removeChild(l.PRIVATE.clone),l.PRIVATE.clone=null)),l.PRIVATE.dragIsActive=!1,l.PRIVATE.pointerOffset=null,l.PRIVATE.removeBodyListeners(),l.PRIVATE.dropTargets=null,l.PRIVATE.initialPosition=null,l.PRIVATE.initialTimestamp=null},storeDropTargets:function(){l.PRIVATE.dropTargets=[];var e=document.querySelectorAll("author-droptarget");l.on("handshake.accepted",l.PRIVATE.handshakeAcceptedHandler);var t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;l.emit("handshake.offered",{draggable:d(l),types:l.PRIVATE.types},a)}}catch(e){n=!0,o=e}finally{try{t||null==i.return||i.return()}finally{if(n)throw o}}l.off("handshake.accepted",l.PRIVATE.handshakeHandler)},synchronizeStyles:function(){var e=l.PRIVATE,t=e.clone,n=e.getComputedStylesCssText;t.style.cssText=n(d(l));var o=l.getElementsByTagName("*"),r=t.getElementsByTagName("*");if(0<o.length)for(var i=0;i<o.length;i++)r[i].style.cssText=n(o[i])},updatePosition:function(e){var t=l.PRIVATE,n=t.clone,o=(t.dimensions,t.originalCoordinates),r=t.pointerOffset,i={x:e.clientX-r.x,y:e.clientY-r.y};if(l.free)return i={x:i.x-(o.x-window.scrollX),y:i.y-(o.y-window.scrollY)},l.UTIL.setStyleProperty("dragging","transform","translate(".concat(i.x,"px, ").concat(i.y,"px)"));n.UTIL.setStyleProperties("dragging",[{name:"left",value:"".concat(i.x,"px"),important:!0},{name:"top",value:"".concat(i.y,"px"),important:!0}])}}),l.UTIL.registerListeners(d(l),{"attribute.changed":function(e){var t=e.detail,n=t.attribute;t.newValue,t.oldValue;switch(n){case"free":l.free||l.UTIL.removeStyleProperty("dragging","transform")}},connected:function(){l.UTIL.insertStyleRule("dragging",":host {}"),l.emit("author-draggable.connected",{draggable:d(l)},window)},mousedown:function(e){if(l.PRIVATE.userIsTouching)return e.preventDefault();l.PRIVATE.forwardEvent(e,"pointerdown")},touchstart:function(e){e.preventDefault(),l.PRIVATE.userIsTouching=!0,l.PRIVATE.forwardEvent(e,"pointerdown")},pointerup:function(e){l.PRIVATE.reset()},pointerdown:function(e){var t={};l.PRIVATE.initialTimestamp=e.timeStamp,e instanceof CustomEvent?(t.x=e.detail.originalEvent.clientX,t.y=e.detail.originalEvent.clientY):(t.x=e.clientX,t.y=e.clientY),l.PRIVATE.initialPosition={x:t.x,y:t.y},l.PRIVATE.pointerOffset={x:t.x-l.PRIVATE.dimensions.left,y:t.y-l.PRIVATE.dimensions.top},document.body.addEventListener(l.PRIVATE.pointerEventsSupported?"pointermove":"mousemove",l.PRIVATE.pointerMoveHandler),l.PRIVATE.storeDropTargets()},rendered:function(){l.UTIL.defineProperty("originalCoordinates",{private:!0,readonly:!0,default:{x:l.PRIVATE.dimensions.left+window.scrollX,y:l.PRIVATE.dimensions.top+window.scrollY}})}}),l}var t,o,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,AuthorBaseElement(HTMLElement)),t=n,r=[{key:"observedAttributes",get:function(){return["direction","disabled","free","min-drag-distance","max-drag-distance","type"]}}],(o=null)&&i(t.prototype,o),r&&i(t,r),n}();return customElements.define("author-draggable",t),t}();
//# sourceMappingURL=author-draggable.es5.min.js.map
